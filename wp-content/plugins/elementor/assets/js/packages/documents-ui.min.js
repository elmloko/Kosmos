!function(){"use strict";var e={d:function(t,n){for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{documentOptionsMenu:function(){return p}});var n=__UNSTABLE__elementorPackages.ui,o=__UNSTABLE__elementorPackages.documents,r=wp.i18n,i=__UNSTABLE__elementorPackages.v1Adapters,a=__UNSTABLE__elementorPackages.icons;function c({type:e}){const{isActive:t,isBlocked:o}=(0,i.useRouteStatus)("panel/page-settings"),c=(0,r.__)("%s Settings","elementor").replace("%s",e.label);return React.createElement(n.Tooltip,{title:c},React.createElement(n.Box,{component:"span","aria-label":void 0},React.createElement(n.ToggleButton,{value:"document-settings",selected:t,disabled:o,onChange:()=>(0,i.openRoute)("panel/page-settings/settings"),"aria-label":c,size:"small"},React.createElement(a.SettingsIcon,null))))}function l({title:e,status:t}){return React.createElement(n.Tooltip,{title:e},React.createElement(n.Stack,{direction:"row",alignItems:"center",spacing:2},React.createElement(n.Typography,{variant:"body2",sx:{maxWidth:"120px"},noWrap:!0},e),"publish"!==t.value&&React.createElement(n.Typography,{variant:"body2",sx:{fontStyle:"italic"}},"(",t.label,")")))}var s=React,u=__UNSTABLE__elementorPackages.topBar;const p=(0,u.createMenu)({name:"document-options",groups:["save"]});function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},m.apply(this,arguments)}const{useMenuItems:d}=p,v=(0,n.styled)(u.PopoverMenu)`
	& > .MuiPopover-paper > .MuiList-root > .MuiDivider-root {
		&:only-child, /* A divider is being rendered lonely */
		&:last-child, /* The last group renders empty but renders a divider */
		& + .MuiDivider-root /* Multiple dividers due to multiple empty groups */ {
			display: none;
		}
	}
`;function g(e){const{save:t,default:n}=d();return s.createElement(v,m({},e,{anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{mt:2,ml:3}}}),t.map((({MenuItem:e,id:t},n)=>[n>0&&s.createElement(u.Divider,{key:`${t}-divider`}),s.createElement(e,{key:t})])),n.length>0&&s.createElement(u.Divider,null),n.map((({MenuItem:e,id:t})=>s.createElement(e,{key:t}))))}function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},y.apply(this,arguments)}(0,u.injectIntoCanvasDisplay)({name:"document-canvas-display",filler:function(){const e=(0,o.useActiveDocument)(),t=(0,o.useHostDocument)(),r=e&&"kit"!==e.type.value?e:t;return r?React.createElement(n.Stack,{direction:"row",spacing:3,sx:{paddingInlineStart:3,cursor:"default"}},React.createElement(l,{title:r.title,status:r.status}),React.createElement(c,{type:r.type})):null}}),(0,u.injectIntoPrimaryAction)({name:"document-primary-action",filler:function(){const e=(0,o.useActiveDocument)(),{save:t}=(0,o.useActiveDocumentActions)(),i=(0,n.usePopupState)({variant:"popover",popupId:"document-save-options"});if(!e)return null;const c=!function(e){return"kit"!==e.type.value&&(e.isDirty||"draft"===e.status.value)}(e),l=e.isSaving&&!c;return s.createElement(s.Fragment,null,s.createElement(n.ButtonGroup,{size:"large",variant:"contained"},s.createElement(n.Button,{onClick:()=>!e.isSaving&&t(),sx:{width:"120px"},disabled:c},l?s.createElement(n.CircularProgress,null):function(e){return e.userCan.publish?(0,r.__)("Publish","elementor"):(0,r.__)("Submit","elementor")}(e)),s.createElement(n.Tooltip,{title:(0,r.__)("Save Options","elementor"),PopperProps:{sx:{"&.MuiTooltip-popper .MuiTooltip-tooltip.MuiTooltip-tooltipPlacementBottom":{mt:3,mr:1}}}},s.createElement(n.Button,y({sx:{px:0}},(0,n.bindTrigger)(i)),s.createElement(a.ChevronDownIcon,null)))),s.createElement(g,(0,n.bindMenu)(i)))}}),u.utilitiesMenu.registerAction({name:"document-preview-button",priority:30,useProps:function(){const e=(0,o.useActiveDocument)();return{icon:a.EyeIcon,title:(0,r.__)("Preview Changes","elementor"),onClick:()=>e&&(0,i.runCommand)("editor/documents/preview",{id:e.id})}}}),p.registerAction({group:"save",name:"document-save-draft",priority:10,useProps:function(){const e=(0,o.useActiveDocument)(),{saveDraft:t}=(0,o.useActiveDocumentActions)();return{icon:a.FileReportIcon,title:(0,r.__)("Save Draft","elementor"),onClick:t,disabled:!e||e.isSaving||e.isSavingDraft||!e.isDirty}}}),p.registerAction({group:"save",name:"document-save-as-template",priority:20,useProps:function(){const{saveTemplate:e}=(0,o.useActiveDocumentActions)();return{icon:a.FolderIcon,title:(0,r.__)("Save as Template","elementor"),onClick:e}}}),(window.__UNSTABLE__elementorPackages=window.__UNSTABLE__elementorPackages||{}).documentsUi=t}();