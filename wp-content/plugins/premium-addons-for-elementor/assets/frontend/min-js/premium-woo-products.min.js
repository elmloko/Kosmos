!function(f){function e(e,o){new premiumWooProducts(e).init()}window.premiumWooProducts=function(n){var a=this,u=n.find(".premium-woocommerce"),d=n.find(".premium-woocommerce").data("skin"),c=null,l=!0,e=u.data("quick-view");if("yes"===e)var o=n.data("id"),t=u.siblings(".premium-woo-quick-view-"+o),s=t.find("#premium-woo-quick-view-modal"),m=s.find("#premium-woo-quick-view-content"),i=s.find(".premium-woo-content-main-wrapper"),r=t.find(".premium-woo-quick-view-back"),p=t.find(".premium-woo-quick-view-loader");a.init=function(){a.handleProductsCarousel(),"yes"===e&&a.handleProductQuickView(),a.handleProductPagination(),a.handleLoadMore(),a.handleAddToCart(),"grid_6"===d&&a.handleGalleryImages(),["grid_7","grid_11"].includes(d)&&(a.handleGalleryCarousel(d),"grid_11"===d&&a.handleGalleryNav()),u.hasClass("premium-woo-products-metro")&&(a.handleGridMetro(),f(window).on("resize",a.handleGridMetro)),n.hasClass("premium-woo-title-above-yes")&&a.handleTitlePos()},a.handleTitlePos=function(){var e=0<u.find(".woocommerce-loop-product__title").length,o=0<u.find(".premium-woo-product-thumbnail .woocommerce-loop-product__link img").length;e&&o&&(u.find("li.product").each(function(e,o){var t=f(o).find(".woocommerce-loop-product__title").parent(),i=f(o).find(".premium-woo-product-thumbnail");t.insertBefore(i)}),u.find(".premium-woo-product__link").css("opacity",1))},a.handleProductsCarousel=function(){var e=u.data("woo_carousel");if(e){var o=u.find("ul.products");e.customPaging=function(){return'<i class="fas fa-circle"></i>'},o.on("init",function(e){setTimeout(function(){u.removeClass("premium-carousel-hidden")},100)}),o.slick(e)}},a.handleGridMetro=function(){var e=u.find("ul.products"),o=elementorFrontend.getCurrentDeviceMode(),t="",i=e.width(),n=Math.floor(i/12);if("tablet"===o?t="_tablet":"mobile"===o&&(t="_mobile"),"custom"===u.data("metro-style")){var a=0,d=0,r=u.data("metro"),c=r["wPattern"+t],l=r["hPattern"+t];""===c&&(c="12"),""===l&&(l="12"),c=c.split(","),l=l.split(","),a+=c.length,d+=l.length,e.find("li.product").each(function(e,o){var t=e%d,i=parseInt(c[e%a]),r=parseInt(l[t]);f(o).css({width:Math.floor(i)*n,height:Math.floor(r)*n})})}e.imagesLoaded(function(){}).done(function(){e.isotope({itemSelector:"li.product",percentPosition:!0,animationOptions:{duration:750,easing:"linear"},layoutMode:"masonry",masonry:{columnWidth:n}})})},a.handleProductQuickView=function(){t.appendTo(document.body),u.on("click",".premium-woo-qv-btn, .premium-woo-qv-data",a.triggerQuickViewModal),window.addEventListener("resize",function(){a.updateQuickViewHeight()})},a.triggerQuickViewModal=function(e){e.preventDefault();var o=f(this).data("product-id");s.hasClass("loading")||s.addClass("loading"),r.hasClass("premium-woo-quick-view-active")||r.addClass("premium-woo-quick-view-active"),a.getProductByAjax(o),a.addCloseEvents()},a.getProductByAjax=function(e){f.ajax({url:PremiumWooSettings.ajaxurl,data:{action:"get_woo_product_qv",product_id:e,security:PremiumWooSettings.qv_nonce},dataType:"html",type:"GET",beforeSend:function(){p.append('<div class="premium-loading-feed"><div class="premium-loader"></div></div>')},success:function(e){p.find(".premium-loading-feed").remove(),m.html(e),a.handleQuickViewModal()},error:function(e){console.log(e)}})},a.addCloseEvents=function(){var e=s.find("#premium-woo-quick-view-close");f(document).keyup(function(e){27===e.keyCode&&a.closeModal()}),e.on("click",function(e){e.preventDefault(),a.closeModal()}),i.on("click",function(e){this===e.target&&a.closeModal()})},a.handleQuickViewModal=function(){m.imagesLoaded(function(){a.handleQuickViewSlider()})},a.getBarWidth=function(){var e=f('<div style="width:50px;height:50px;overflow:hidden;position:absolute;top:-200px;left:-200px;"><div style="height:100px;"></div>');f("body").append(e);var o=f("div",e).innerWidth();e.css("overflow-y","scroll");var t=f("div",e).innerWidth();return f(e).remove(),o-t},a.handleQuickViewSlider=function(){var e=s.find(".premium-woo-qv-image-slider");1<e.find("li").length?e.flexslider({animation:"slide",start:function(e){setTimeout(function(){a.updateQuickViewHeight(!0,!0)},300)}}):setTimeout(function(){a.updateQuickViewHeight(!0)},300),s.hasClass("active")||setTimeout(function(){s.removeClass("loading").addClass("active");var e=a.getBarWidth();f("html").css("margin-right",e),f("html").addClass("premium-woo-qv-opened")},350)},a.updateQuickViewHeight=function(e,o){var t=m,i=t.find(".product .premium-woo-qv-image-slider").first().height(),r=t.find(".product .summary.entry-summary"),n=r.css("content");void 0!==n&&544==n.replace(/[^0-9]/g,"")&&0!=i&&null!==i?r.css("height",i):r.css("height",""),!0===e&&s.css("opacity",1),o&&t.find(".product .premium-woo-qv-image-slider img").height(r.outerHeight())},a.closeModal=function(){r.removeClass("premium-woo-quick-view-active"),s.removeClass("active").removeClass("loading"),f("html").removeClass("premium-woo-qv-opened"),f("html").css("margin-right",""),setTimeout(function(){m.html("")},600)},a.handleAddToCart=function(){u.on("click",".instock .premium-woo-cart-btn.product_type_simple",a.onAddCartBtnClick).on("premium_product_add_to_cart",a.handleAddCartBtnClick).on("click",".instock .premium-woo-atc-button .button.product_type_simple",a.onAddCartBtnClick).on("premium_product_add_to_cart",a.handleAddCartBtnClick)},a.onAddCartBtnClick=function(e){var o=f(this),t=o.data("product_id");t&&(o.parent().data("variations")||o.data("added-to-cart")||(e.preventDefault(),o.removeClass("added").addClass("adding"),o.hasClass("premium-woo-cart-btn")||o.append('<span class="premium-woo-cart-loader fas fa-cog"></span>'),f.ajax({url:PremiumWooSettings.ajaxurl,type:"POST",data:{action:"premium_woo_add_cart_product",nonce:PremiumWooSettings.cta_nonce,product_id:t,quantity:1},success:function(){f(document.body).trigger("wc_fragment_refresh"),u.trigger("premium_product_add_to_cart",[o]),"grid_10"!==d&&o.hasClass("premium-woo-cart-btn")||setTimeout(function(){var e=o.siblings(".added_to_cart").text();""==e&&(e="View Cart"),o.removeClass("add_to_cart_button").attr("href",PremiumWooSettings.woo_cart_url).text(e),o.attr("data-added-to-cart",!0)},200)}})))},a.handleAddCartBtnClick=function(e,o){o&&o.removeClass("adding").addClass("added")},a.handleGalleryImages=function(){u.on("click",".premium-woo-product__gallery_image",function(){var e=f(this),o=e.closest(".premium-woo-product-thumbnail"),t=e.attr("src");o.find(".premium-woo-product__on_hover").length<1?o.find(".woocommerce-loop-product__link img").replaceWith(e.clone(!0)):o.find(".premium-woo-product__on_hover").attr("src",t)})},a.handleGalleryNav=function(){u.on("click",".premium-woo-product-gallery-images .premium-woo-product__gallery_image",function(){var e=f(this).parentsUntil(".premium-woo-product-wrapper")[2],o=f(e).siblings(".premium-woo-product-thumbnail").find(".premium-woo-product-thumbnail-wrapper"),t=f(this).index()+1;o.slick("slickGoTo",t)})},a.handleGalleryCarousel=function(e){var o=u.find(".premium-woo-product-thumbnail-wrapper"),t={infinite:"grid_11"!==e,slidesToShow:1,slidesToScroll:1,draggable:!0,autoplay:!1,rtl:elementorFrontend.config.is_rtl};"grid_11"!==e?(t.nextArrow='<a type="button" data-role="none" class="carousel-arrow carousel-next" aria-label="Next" role="button" style=""><i class="fas fa-angle-right" aria-hidden="true"></i></a>',t.prevArrow='<a type="button" data-role="none" class="carousel-arrow carousel-prev" aria-label="Previous" role="button" style=""><i class="fas fa-angle-left" aria-hidden="true"></i></a>'):t.arrows=!1,o.each(function(e,o){$imgs=f(o).find("a").length,1<$imgs&&f(o).not(".slick-initialized").slick(t)})},a.handleLoadMore=function(){var i=u.find(".premium-woo-load-more-btn"),r=2,o=u.data("page-id");i.length<1||i.on("click",function(e){l&&(l=!1,u.find("ul.products").after('<div class="premium-loading-feed"><div class="premium-loader"></div></div>'),i.css("opacity",.3),f.ajax({url:PremiumWooSettings.ajaxurl,data:{action:"get_woo_products",pageID:o,elemID:n.data("id"),category:i.data("tax"),orderBy:i.data("order"),skin:d,page_number:r,nonce:PremiumWooSettings.products_nonce},dataType:"json",type:"POST",success:function(e){c=e.data.html;var o=i.data("products")-c.match(/<li/g).length;o<1&&i.remove(),l=!0,u.find(".premium-loading-feed").remove(),i.css("opacity",1);var t=u.find("ul.products");c=(c=c.replace(c.substring(0,c.indexOf(">")+1),"")).replace("</ul>",""),i.find(".premium-woo-products-num").text("("+o+")"),i.data("products",o),t.append(c),"grid_7"!==d&&"grid_11"!==d||a.handleGalleryCarousel(d),r++},error:function(e){console.log(e)}}))})},a.handleProductPagination=function(){u.on("click",".premium-woo-products-pagination a.page-numbers",function(e){var o=f(this);if(!u.hasClass("premium-woo-query-main")){e.preventDefault(),u.find("ul.products").after('<div class="premium-loading-feed"><div class="premium-loader"></div></div>');var t=u.data("page-id"),i=parseInt(u.find(".page-numbers.current").html()),r=1;r=o.hasClass("next")?i+1:o.hasClass("prev")?i-1:o.html(),f.ajax({url:PremiumWooSettings.ajaxurl,data:{action:"get_woo_products",pageID:t,elemID:n.data("id"),category:"",skin:d,page_number:r,nonce:PremiumWooSettings.products_nonce},dataType:"json",type:"POST",success:function(e){u.find(".premium-loading-feed").remove(),f("html, body").animate({scrollTop:n.find(".premium-woocommerce").offset().top-100},"slow"),u.find("ul.products").replaceWith(e.data.html),u.find(".premium-woo-products-pagination").replaceWith(e.data.pagination),"grid_7"!==d&&"grid_11"!==d||a.handleGalleryCarousel(d),u.hasClass("premium-woo-products-metro")&&a.handleGridMetro()},error:function(e){console.log(e)}})}})}},f(window).on("elementor/frontend/init",function(){elementorFrontend.hooks.addAction("frontend/element_ready/premium-woo-products.grid-1",e),elementorFrontend.hooks.addAction("frontend/element_ready/premium-woo-products.grid-2",e),elementorFrontend.hooks.addAction("frontend/element_ready/premium-woo-products.grid-3",e),elementorFrontend.hooks.addAction("frontend/element_ready/premium-woo-products.grid-4",e),elementorFrontend.hooks.addAction("frontend/element_ready/premium-woo-products.grid-5",e),elementorFrontend.hooks.addAction("frontend/element_ready/premium-woo-products.grid-6",e),elementorFrontend.hooks.addAction("frontend/element_ready/premium-woo-products.grid-7",e),elementorFrontend.hooks.addAction("frontend/element_ready/premium-woo-products.grid-8",e),elementorFrontend.hooks.addAction("frontend/element_ready/premium-woo-products.grid-9",e),elementorFrontend.hooks.addAction("frontend/element_ready/premium-woo-products.grid-10",e),elementorFrontend.hooks.addAction("frontend/element_ready/premium-woo-products.grid-11",e)})}(jQuery);