!function(d){d(window).on("elementor/frontend/init",function(){var e=elementorModules.frontend.handlers.Base.extend({getDefaultSettings:function(){return{selectors:{container:".premium-tcloud-container",canvas:".premium-tcloud-canvas",termWrap:".premium-tcloud-term"}}},getDefaultElements:function(){var e=this.getSettings("selectors");return{$container:this.$element.find(e.container),$canvas:this.$element.find(e.canvas),$termWrap:this.$element.find(e.termWrap)}},bindEvents:function(){this.run()},run:function(){var e=this.getElementSettings(),t=this.elements.$container,r=this,o=this.elements.$canvas;if(["shape","sphere"].includes(e.words_order)){var n=getComputedStyle(o[0]);o.attr({width:n.getPropertyValue("--pa-tcloud-width"),height:n.getPropertyValue("--pa-tcloud-height")})}setTimeout(function(){"shape"===e.words_order?elementorFrontend.waypoint(o,function(){r.renderWordCloud()}):"sphere"===e.words_order?r.renderWordSphere():r.handleTermsGrid(),t.removeClass("premium-tcloud-hidden")},500)},renderWordSphere:function(){var e=this.getID(),o=this.getElementSettings(),t=this.elements.$termWrap,n=this,i=o.colors_select;if("custom"===i&&o.words_colors)var a=o.words_colors.split("\n");t.map(function(e,t){var r=null;"custom"!==i?r=n.genRandomColor(i):o.words_colors&&(r=Math.floor(Math.random()*a.length),r=a[r]),r&&d(t).find(".premium-tcloud-term-link").css(("background"===o.colors_target?"background-":"")+"color",r)}),setTimeout(function(){d("#premium-tcloud-canvas-"+e).tagcanvas({decel:"yes"===o.stop_onDrag?.95:1,overlap:!1,textColour:null,weight:"yes"===o.sphere_weight,weightFrom:"data-weight",weightSizeMin:"yes"===o.sphere_weight?o.weight_min.size:10,weightSizeMax:"yes"===o.sphere_weight?o.weight_max.size:20,textHeight:o.text_height||15,textFont:o.font_family,textWeight:o.font_weight,wheelZoom:"yes"===o.wheel_zoom,reverse:"yes"===o.reverse,dragControl:"yes"===o.drag_control,initial:[o.start_xspeed.size,o.start_yspeed.size],bgColour:"tag",padding:"background"===o.colors_target?o.sphere_term_padding.size:0,bgRadius:"background"===o.colors_target?o.sphere_term_radius.size:0,outlineColour:"rgba(2,2,2,0)",maxSpeed:.03,depth:.75},"premium-tcloud-terms-container-"+e)},100)},handleTermsGrid:function(){var i=this.getElementSettings(),e=this.elements.$termWrap,a=this,s=i.colors_select;if("custom"===s&&i.words_colors)var l=i.words_colors.split("\n");e.map(function(e,t){var r=null,o=d(t).find(".premium-tcloud-term-link").css("font-size").replace("px","");if(0<i.fsize_scale.size&&(o=parseFloat(o)+d(t).find(".premium-tcloud-term-link").data("weight")*i.fsize_scale.size),"custom"!==s){r=a.genRandomColor(s,"grid");var n={original:"random-light"===s?"0.15)":"80%)",replaced:"random-light"===s?"0.3)":"100%)"};d(t).get(0).style.setProperty("--tag-hover-color",r.replace(n.original,n.replaced)),d(t).get(0).style.setProperty("--tag-text-color","random-dark"===s?"#fff":r.replace("42%,0.15)","35%,100%)"))}else i.words_colors&&(r=Math.floor(Math.random()*l.length),r=l[r],d(t).get(0).style.setProperty("--tag-hover-color",r));d(t).get(0).style.setProperty("--tag-color",r),0<i.fsize_scale.size&&d(t).find(".premium-tcloud-term-link").css("font-size",Math.ceil(o)+"px"),"ribbon"===i.words_order&&d(t).get(0).style.setProperty("--tag-ribbon-size",Math.ceil(d(t).outerHeight(!1))/2+"px")})},renderWordCloud:function(){var e=this.getID(),r=this.getElementSettings(),t=this.elements.$container.data("chart").wordsArr,o=[],n=rotationSteps=null,i=Math.PI/180*-90,a=Math.PI/180*90;switch(r.rotation_select){case"horizontal":rotationSteps=n=0;break;case"vertical":n=1,rotationSteps=2;break;case"hv":n=.5,rotationSteps=2;break;case"custom":n=r.rotation.size||.3,i=r.degrees.size*(Math.PI/180)||45,a=r.degrees.size*(Math.PI/180)||45;break;case"random":n=Math.random(),rotationSteps=0;break;default:n=.3}"custom"===r.colors_select&&(o=r.words_colors.split("\n")),WordCloud(document.getElementById("premium-tcloud-canvas-"+e),{backgroundColor:"rgba(0, 0, 0, 0)",shuffle:!1,list:t,shape:r.shape,color:r.colors_select,wordsColors:o,wait:1e3*r.interval.size||0,gridSize:r.grid_size.size||8,weightFactor:r.weight_scale||5,minRotation:i,maxRotation:a,rotateRatio:n,rotationSteps:rotationSteps,fontFamily:r.font_family||"Arial",fontWeight:r.font_weight,click:function(e){if(!elementorFrontend.isEditMode()){var t=e[2];window.open(t,"yes"===r.new_tab?"_blank":"_top")}}})},genRandomColor:function(e,t){var r=50,o=90;"random-dark"===e&&(r=10,o=50);var n=(Math.random()*(o-r)+r).toFixed()+"%, 100%";return t&&(n="42%,"+("random-dark"===e?"80%":"0.15")),"hsla("+(360*Math.random()).toFixed()+",100%,"+n+")"},genRandomRotate:function(){return Math.floor(361*Math.random())}});elementorFrontend.elementsHandler.attachHandler("premium-tcloud",e)})}(jQuery);